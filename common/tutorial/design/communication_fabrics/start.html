<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>tutorial:design:communication_fabrics:start - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="tutorial,design,communication_fabrics,start"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="start.html"/>
<link rel="contents" href="start.html" title="Sitemap"/>
<link rel="manifest" href="../../lib/exe/manifest.html"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="start.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/tutorial/design/communication_fabrics/start.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/tutorial/design/communication_fabrics/start.raw"/>
<link rel="canonical" href="https://workcraft.org/tutorial/design/communication_fabrics/start"/>
<link rel="stylesheet" href="../../lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='tutorial:design:communication_fabrics';var SIG=" --- \/\/[[support@workcraft.org| ]] 2020\/11\/24 09:02\/\/";var JSINFO = {"fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"plugin_folded":{"hide":"hide","reveal":"reveal"},"move_renameokay":true,"id":"tutorial:design:communication_fabrics:start","namespace":"tutorial:design:communication_fabrics","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="../../lib/exe/jquery.php.t.dokuwiki-light-export.js" defer="defer"></script>
<script charset="utf-8" src="../../lib/exe/js.php.t.dokuwiki-light-export.js" defer="defer"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../favicon.ico" />
<link rel="apple-touch-icon" href="../../apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <h1><a href="../../start.html"  accesskey="" title=""><img src="../../logo.png" width="381" height="64" alt="" /></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action profile"><a href="start.html" title="Profile" rel="nofollow"><span>Profile</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2 3h20c1.05 0 2 .95 2 2v14c0 1.05-.95 2-2 2H2c-1.05 0-2-.95-2-2V5c0-1.05.95-2 2-2m12 3v1h8V6h-8m0 2v1h8V8h-8m0 2v1h7v-1h-7m-6 3.91C6 13.91 2 15 2 17v1h12v-1c0-2-4-3.09-6-3.09M8 6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg></a></li><li class="action admin"><a href="start.html" title="Admin" rel="nofollow"><span>Admin</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"/></svg></a></li><li class="action logout"><a href="start.html" title="Log Out" rel="nofollow"><span>Log Out</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M17 17.25V14h-7v-4h7V6.75L22.25 12 17 17.25M13 2a2 2 0 0 1 2 2v4h-2V4H4v16h9v-4h2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9z"/></svg></a></li>                </ul>
            </div>
        -->
        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start.html" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="tutorial:design:communication_fabrics:start" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../..//doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="tutorial:design:communication_fabrics:start" /><input type="hidden" name="sectok" value="76e97b919f59bf5330d969a72ba5bf17" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="export_pdf">Export to PDF</option><option value="menuitemfolded">Fold/unfold all</option><option value="menuitem">Rename Page</option><option value="siteexport_addpage">Export Page to HTML/PDF</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Media</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="profile">Profile</option><option value="admin">Admin</option><option value="logout">Log Out</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="start.html" title="Changes [r]" rel="nofollow" accesskey="r">Changes</a></li><li class="action media"><a href="start.html" title="Media" rel="nofollow">Media</a></li><li class="action index"><a href="start.html" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>tutorial:design:communication_fabrics:start</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div><!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#modelling_and_verification_using_xmas">Modelling and verification using xMAS</a></div></li>
<li class="level1"><div class="li"><a href="#gals_modelling_and_verification_using_xmas">GALS modelling and verification using xMAS</a></div></li>
<li class="level1"><div class="li"><a href="#exercise_1xmas_example">Exercise 1: xMAS example</a></div></li>
<li class="level1"><div class="li"><a href="#other_examples">Other Examples</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 id="analysis_and_verification_of_communication_fabrics">Analysis and Verification of Communication Fabrics</h1>
<div class="level1">

<p>
In this tutorial we consider analysis and verification of communication fabrics using xMAS Circuit models.
xMAS models are created using communication primitives which are glued together to form circuits. An additional synchroniser primitive is used for creating GALS circuits using xMAS models.
</p>

<p>
When an xMAS circuit has been constructed it can be converted into Petri net models which are passed to an external
tool for verification. Verification proceeds by unfolding the Petri net models to occurrence nets followed by deadlock analysis. The verification operates at different levels: (1) a basic level which is used for finding global or local deadlocks; (2) an advanced level which analyses the relations between the deadlocked queues in terms of blocking and idleness. The tutorial starts by focussing on a basic xMAS example.
</p>

</div>

<h2 id="modelling_and_verification_using_xmas">Modelling and verification using xMAS</h2>
<div class="level2">

<p>
xMAS modelling uses eight basic communication primitives.
</p>

<p>
The basic communication primitives are: <em>Source</em>, <em>Sink</em>, <em>Function</em>, <em>Fork</em>, <em>Join</em>, <em>Merge</em>, <em>Switch</em>, <em>Queue</em>.
A basic model can be constructed by gluing these components together to form a communication circuit.
The basic communication model is centered around queueing. An example is given below.
</p>

<p>
<img src="circ-ex.svg" width="459" height="260" class="svgscaleinsert mediacenter" alt="xMAS example">
</p>

<p>
Download this model: <span class="wrap_download "><a href="circ-ex.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:circ-ex.work (4.2 KB)">circ-ex.work</a> (4 KiB)</span>.
</p>

<p>
Load the example into Workcraft and test it using the following instructions.
</p>

<p>
Once a circuit has been constructed it can be converted into Json which  is a data interchange format.
This is done by selecting the <em>Tools</em> menu and selecting <em>Export</em> to Json. A description of the Json for
the circuit is then generated which appears in the console.
</p>
<pre class="code">Json output

&quot;VARS&quot;: [],
&quot;PACKET_TYPE&quot;: {},
&quot;COMPOSITE_OBJECTS&quot;: [],
&quot;NETWORK&quot;: [
  {
    &quot;id&quot;: &quot;Src0&quot;,
    &quot;type&quot;: &quot;source&quot;,
    &quot;outs&quot; : [
      {
        &quot;id&quot;: &quot;Mrg0&quot;,
        &quot;in_port&quot;: 0
      }
    ] 
    ......</pre>

<p>
After the Json has been generated it can be converted into CPNs by selecting the <em>Tools</em> menu followed by selecting <em>GenerateCPN</em>.
The Control CPNs are generated which appear in the console together with an auxiliary file containing additional information required by the verification.
</p>
<pre class="code">CPN output

gensource Src0
marking p_Src0_oracle0 1
marking p_Src0_oracle1 0
p_Src0_oracle0  t_Src0_oracleplus
t_Src0_oracleplus  p_Src0_oracle1
p_Src0_oracle1  t_Src0_oracleminus
t_Src0_oracleminus  p_Src0_oracle0
marking p_Src0o_irdy0 1
marking p_Src0o_irdy1 0
p_Src0o_irdy0  t_Src0o_irdyplus
t_Src0o_irdyplus  p_Src0o_irdy1
p_Src0o_irdy1  t_Src0o_irdyminus
t_Src0o_irdyminus  p_Src0o_irdy0</pre>

<p>
For verification the verification tool is invoked by selecting the <em>Tools</em> menu followed by the <em>Verification</em> submenu. Various submenus may be selected from this. For a normal verification the <em>Configuration</em> submenu should be selected and when the configuration popup window appears the following configuration should be made. The <em>Level</em> of verification should be set to normal, the <em>Display</em> set to popup and the <em>Highlight</em> set to none. The <kbd class="__keyboard"><code>  OK  </code></kbd> button should be clicked on to save the configuration.
</p>

<p>
Verification is invoked by selecting the <em>Tools</em> menu followed by selecting <em>Verification</em> and
then clicking on the <em>Verification</em> submenu.
After deadlock analysis has finished a popup window appears showing the trace for a global deadlock.
</p>

<p>
<img src="circ-deadlock.png" class="mediacenter" title="Deadlock trace" alt="Deadlock trace" />
</p>

<p>
The view of the trace may be closed by clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button in the popup window.
</p>

<p>
To set up the configuration for an advanced level verification the <em>Verification Configuration</em> submenu should be selected from the <em>Tools</em> menu. In the configuration popup window the <em>Level</em> of verification should be set to advanced, the <em>Display</em> set to popup and the <em>Highlight</em> set to rel.
</p>

<p>
To initiate a verification the <em>Tools Verification</em> should be selected followed by clicking on the <em>Verification</em> submenu.
After deadlock analysis has finished a popup window appears detailing relational information about the analysis. The resulting xMAS diagram highlights the blocking and idle relations between the queues. Further details about the analysis appear in the console.
</p>

<p>
<img src="circ-verif.png" class="mediacenter" title="xMAS verification" alt="xMAS verification" />
</p>

<p>
To analyse a different solution an <em>Analysis</em> popup window may be invoked by selecting the <em>Tools</em> menu followed by <em>Verification</em> followed by the <em>Analysis</em> submenu.
</p>

<p>
A popup window appears displaying the number of unique solutions. These relate to different queue and
relational configurations occurring in the deadlock state. From the list of solutions the second one should be selected and accepted by clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button.
</p>

<p>
A popup window appears detailing relational information about the analysis. The resulting xMAS diagram highlighs the new relations for the second solution.
</p>
<div class="wrap_info plugin_wrap">
<p>
The example has two unique solutions. These occur because of the manner in which data passes through the switches when operating in non-deterministic mode. The solutions are mirror images of each other which exist because of the symmetry in the model.
</p>
</div>
</div>

<h2 id="gals_modelling_and_verification_using_xmas">GALS modelling and verification using xMAS</h2>
<div class="level2">

<p>
For GALS xMAS models an additional primitive is used called a synchroniser. The synchroniser
acts as a black-box which houses a number of possible synchronisation solutions: asynchronous,
mesochronous, pausible.
</p>

<p>
A GALS circuit consists of local modules constructed from the basic communication
primitives which are connected together using synchronisers. The example shown below is an example 
of a producer consumer pair linked together by an asynchronous synchronisation unit.
</p>

<p>
<img src="gals-ex.svg" width="571" height="209" class="svgscaleinsert mediacenter" alt="GALS Producer Consumer example">
</p>

<p>
Download this model: <span class="wrap_download "><a href="gals-ex.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:gals-ex.work (5.9 KB)">gals-ex.work</a> (6 KiB)</span>.
</p>

<p>
Load the example into Workcraft and test it using the following instructions.
</p>

<p>
To create local GALS modules the xMAS components should be grouped together using the selection pointer (by left clicking on the mouse and dragging to select components) and then the Group selection icon should be selected from the tool  <a href="../../../help/core/tool_controls.html#selection_controls" class="wikilink1" title="help:core:tool_controls" data-wiki-id="help:core:tool_controls">Selection controls</a>.
This is used to create two groups: one for the producer (left of the synchroniser) and one for the consumer (right of the synchroniser).
</p>

<p>
Synchronisation configuration may be achieved by selecting the <em>Tools</em> menu followed by the <em>Sync</em> and <em>Configure</em> submenus. A popup window will appear displaying the synchroniser name together with some configuration options. For configuration the <em>asynchronous</em> option should be selected from the pull down box. A 1 will automatically appear in the CLK1 edit box and a 2 should be typed in the CLK2 edit box. The configuration may be saved by clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button.
</p>

<p>
Once the groupings have been made and synchronisation settings have been configured it can be converted into Json by selecting the <em>Tools</em> menu followed by <em>Export</em> to Json.
</p>

<p>
After the Json has been generated it can be converted into CPNs by selecting the <em>Tools</em> menu followed by selecting <em>GenerateCPN</em>. The Control CPNs are generated together with an auxiliary file containing additional information about the synchronisers required by the verification.
</p>

<p>
To set up the configuration for an advanced level verification the <em>Verification Configuration</em> submenu should be selected from the <em>Tools</em> menu. In the configuration popup window the <em>Level</em> of verification should be set to advanced, the <em>Display</em> set to popup and the <em>Highlight</em> set to rel.
</p>

<p>
To initiate a verification the <em>Tools Verification</em> should be selected followed by clicking on the <em>Verification</em> submenu.
After deadlock analysis has finished a popup window appears detailing relational information about the analysis. The resulting xMAS diagram highlights the blocking and idle relations between the queues. Further details about the analysis appear in the console.
</p>

<p>
<img src="gals-verif.png" class="mediacenter" title="GALS verification" alt="GALS verification" />
</p>

<p>
To find the source of deadlock a query can be made. A query may be invoked by selecting <em>Tools Verification</em>
followed by the <em>Query</em> submenu. A popup window will appear listing various options. The first of these options i.e. <em>Sources</em> should be selected and the pulldown list to the right set to <em>ALL</em>. A Query will be invoked after clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button. The results of the Query appear in a popup window.
</p>

<p>
<img src="gals-query1.png" class="mediacenter" title="GALS Source query" alt="GALS Source query" />
</p>

<p>
To validate that a valid source has been found the relations should be examined between various queues. After invoking the query popup window again the second one of the options i.e. <em>Pt-to-pt</em> should be selected. From the pulldown lists to the right a pair of queues appearing in the xMAS diagram should be selected. Different queries should be made by selecting the following pairs of queues [Qu0,Qu4] [Qu4,Qu7] [Qu5,Qu10] and clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button each time.
</p>

<p>
<img src="gals-query2.png" class="mediacenter" title="GALS Pt-to-pt query" alt="GALS Pt-to-pt query" />
</p>

<p>
The results show the relations which exists between the queues.
</p>

<p>
After validating the source a component can be changed in the design to correct the origin of the deadlock. Ungroup the modules using the Selection controls (select each module followed by the Ungroup selection icon), change the component Mrg2 to a Join component and reconnect the component in the diagram. Run through all the steps starting from grouping the modules all the way to verification in order to see the result.
</p>
<div class="wrap_info plugin_wrap">
<p>
The example has one unique deadlock source appearing inside the producer. By use of the querying it becomes
clear to see that a chain of deadlock relations runs from producer to consumer resulting in complete shutdown. The solution involves changing a communication primitive which is adjacent to the source of the deadlock.
</p>
</div>
<p>
The example shown below is an example of a problem caused by synchronisation timing problems.
</p>

<p>
<img src="gals-ex2.svg" width="525" height="298" class="svgscaleinsert mediacenter" alt="tutorial:design:communication_fabrics:gals-ex2.svg">
</p>

<p>
Download this model (COMM3): <span class="wrap_download "><a href="gals-ex2.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:gals-ex2.work (6.3 KB)">gals-ex2.work</a> (6 KiB)</span>.
</p>

<p>
Load the example into Workcraft and test it using the following instructions.
</p>

<p>
To create local GALS modules the xMAS components should be grouped together using the selection pointer (by left clicking on the mouse and dragging to select components) and then the Group selection icon should be selected from the tool  <a href="../../../help/core/tool_controls.html#selection_controls" class="wikilink1" title="help:core:tool_controls" data-wiki-id="help:core:tool_controls">Selection controls</a>.
This is used to create two groups: one to the left of the synchroniser and one to the right of the synchroniser.
</p>

<p>
Synchronisation configuration may be achieved by selecting the <em>Tools</em> menu followed by the <em>Sync</em> and <em>Configure</em> submenus. A popup window will appear displaying the synchroniser name together with some configuration options. For configuration the <em>asynchronous</em> option should be selected from the pull down box. A 1 will automatically appear in the CLK1 edit box and a 1 will appear in the CLK2 edit box. The configuration may be saved by clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button.
</p>

<p>
Once the groupings have been made and synchronisation settings have been configured it can be converted into Json by selecting the <em>Tools</em> menu followed by <em>Export</em> to Json. After the Json has been generated it can be converted into CPNs by selecting the <em>Tools</em> menu followed by selecting <em>GenerateCPN</em>.
</p>

<p>
In the <em>Verification Configuration</em> popup window the <em>Level</em> of verification should be set to advanced, the <em>Display</em> set to popup and the <em>Highlight</em> set to rel.
</p>

<p>
To initiate a verification the <em>Tools Verification</em> should be selected followed by clicking on the <em>Verification</em> submenu.
After deadlock analysis has finished a popup window appears detailing relational information about the analysis. The resulting xMAS diagram highlights the blocking and idle relations between the queues.
</p>

<p>
<img src="gals-verif1.png" class="mediacenter" title="gals-verif1.png" alt="gals-verif1.png" />
</p>

<p>
Edit the xMAS circuit. Delete the synchroniser and make a link directly from Q1 to the merge. Convert it into Json by selecting the <em>Tools</em> menu followed by <em>Export</em> to Json and convert this into CPNs by selecting the <em>Tools</em> menu followed by selecting <em>GenerateCPN</em>. An attempt to repeat the verification should be made. The circuit without the synchroniser will appear to be deadlock free.
</p>

<p>
Now reconnect the synchroniser between Q1 and the merge. Reconfigure the synchronisation in the <em>Synch Configuration</em> popup window and change the synchroniser to mesochronous. Convert it into Json by selecting the <em>Tools</em> menu followed by <em>Export</em> to Json and convert this into CPNs by selecting the <em>Tools</em> menu followed by selecting <em>GenerateCPN</em>. An attempt to repeat the verification should be made. The circuit will also appear to be deadlock free.
</p>
<div class="wrap_info plugin_wrap">
<p>
A deadlock appears in the asynchronous synchroniser because of timing mismatch due to setup and potential synchronisation problems resulting in downstream functional errors. The same problem does not occur if the synchroniser is removed or it is replaced by a mesochronous synchroniser.
</p>
</div>
</div>

<h2 id="exercise_1xmas_example">Exercise 1: xMAS example</h2>
<div class="level2">

<p>
For this exercise an Agent example will be used. The example for this is shown below 
and comprises two communicating agents communicating accross a mesochronous division.
</p>

<p>
<img src="gals-ex1.svg" width="696" height="400" class="svgscaleinsert mediacenter" alt="GALS Agent example">
</p>

<p>
Download this model (GLOC2): <span class="wrap_download "><a href="gals-ex1.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:gals-ex1.work (6.6 KB)">gals-ex1.work</a> (7 KiB)</span>.
</p>

<p>
Load the example into Workcraft and attempt to complete the instructions in the exercise.
</p>

<p>
To create local GALS modules the xMAS components should be grouped together using the selection pointer (click and drag around components) and then the Group selection icon should be selected from the tool  <a href="../../../help/core/tool_controls.html#selection_controls" class="wikilink1" title="help:core:tool_controls" data-wiki-id="help:core:tool_controls">Selection controls</a>.
This should be used to create two groups: one for the first agent (to the left of the synchronisers) and one for the second agent (to the right of the synchronisers). The synchronisers should appear in the center between the two modules.
</p>

<p>
After grouping the modules, synchronisation configuration may be achieved by selecting the <em>Tools</em> menu followed by the <em>Sync</em> and <em>Configure</em> submenus. A popup window will appear displaying the synchronisers together with configuration options. For configuration the <em>mesochronous</em> option should be selected from the pull down box. A 1 will automatically appear in the CLK1 edit box and a 1 will automatically appear in the CLK2 edit box. Both synchronisers should be configured in this manner.
</p>

<p>
Once the groupings have been made and synchronisation settings have been configured it can be converted into Json by selecting the <em>Tools</em> menu followed by <em>Export</em> to Json.
</p>

<p>
After the Json has been generated it should be converted into CPNs by selecting the <em>Tools</em> menu followed by selecting <em>GenerateCPN</em>.
The Control CPNs are generated together with an auxiliary file containing additional information about the synchronisers required by the verification.
</p>

<p>
The configuration should be set for an advanced level verification by selecting configure from the verification menu. In the verification configuration popup window the <em>Level</em> of verification should be set to advanced, the <em>Display</em> set to popup and the <em>Highlight</em> set to rel.
</p>

<p>
To initiate a verification the <em>Tools Verification</em> should be selected followed by clicking on the <em>Verification</em> submenu.
After deadlock analysis has finished a popup window will appear detailing relational information about the analysis. The resulting xMAS diagram should be examined to observe the different blocking and idle relations between the queues. For the agent example only partial shutdown occurs. Blocking and idle relations are only displayed in the diagram where deadlock occurs. The remaining queues which are deadlock free appear in green.
</p>

<p>
To find the source of deadlock a query should be made by selecting <em>Tools Verification</em>
followed by the <em>Query</em> submenu. In the popup window the first option i.e. <em>Sources</em> should be selected and the pulldown list to the right set to <em>ALL</em>. After clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> the results of the Query will appear in a popup window.
</p>

<p>
To validate a valid source has been found the relations should be examined between various queues. After invoking the query popup window again the second one of the options i.e. <em>Pt-to-pt</em> should be selected. From the pulldown lists to the right a pair of queues appearing in the xMAS diagram should be selected. Different queries should be made by selecting the following pairs of queues [Qu2, Qu0] [Qu2,Qu5] [Qu2,Qu8] and clicking on the <kbd class="__keyboard"><code>  OK  </code></kbd> button each time.
</p>

<p>
After validating this is the correct source to complete the exercise try to work out which component can be changed in the design that is adjacent to the source of the deadlock to correct it. Ungroup the modules using the tool <a href="../../../help/core/tool_controls.html#selection_controls" class="wikilink1" title="help:core:tool_controls" data-wiki-id="help:core:tool_controls">Selection controls</a>, change one of the components in the diagram and run through all the steps starting from grouping the modules all the way to verification to see if you can find a correct solution.
</p>

</div>

<h2 id="other_examples">Other Examples</h2>
<div class="level2">
<ul>
<li class="level1 node"><div class="li"> COMM1</div>
<ul>
<li class="level2"><div class="li"> Download: <span class="wrap_download "><a href="gals-ex3.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:gals-ex3.work (4.7 KB)">gals-ex3.work</a> (5 KiB)</span>.</div>
</li>
<li class="level2"><div class="li"> Synchronisation configuration: [asynchronous, clk=1, clk=2]</div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1 node"><div class="li"> COMM2</div>
<ul>
<li class="level2"><div class="li"> Download: <span class="wrap_download "><a href="gals-ex4.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:gals-ex4.work (6.3 KB)">gals-ex4.work</a> (6 KiB)</span>.</div>
</li>
<li class="level2 node"><div class="li"> Synchronisation configuration: </div>
<ul>
<li class="level3"><div class="li"> [asynchronous, clk=1, clk=2] </div>
</li>
<li class="level3"><div class="li"> [asynchronous, clk=2, clk=1]</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1 node"><div class="li"> GLOC3</div>
<ul>
<li class="level2"><div class="li"> Download: <span class="wrap_download "><a href="gals-ex5.work" class="media mediafile mf_work" title="tutorial:design:communication_fabrics:gals-ex5.work (7 KB)">gals-ex5.work</a> (7 KiB)</span>.</div>
</li>
<li class="level2 node"><div class="li"> Synchronisation configuration:</div>
<ul>
<li class="level3"><div class="li"> [asynchronous, clk=1, clk=1]</div>
</li>
<li class="level3"><div class="li"> [asynchronous, clk=1, clk=1]</div>
</li>
<li class="level3"><div class="li"> [asynchronous, clk=1, clk=1]</div>
</li>
<li class="level3"><div class="li"> [asynchronous, clk=1, clk=1]</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                <div class="docInfo">
                    workcraft @ <bdi>tutorial/design/communication_fabrics/start.txt</bdi> · Modified 2020/06/16 11:33 by <bdi>danil</bdi>                </div>
-->
                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="edit"><a href="start.html" title="Edit this page [e]" rel="nofollow" accesskey="e"><span>Edit this page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg></a></li><li class="revs"><a href="start.html" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="start.html" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="export_pdf"><a href="start.html" title="Export to PDF" rel="nofollow"><span>Export to PDF</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14 9h5.5L14 3.5V9M7 2h8l6 6v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m4.93 10.44c.41.9.93 1.64 1.53 2.15l.41.32c-.87.16-2.07.44-3.34.93l-.11.04.5-1.04c.45-.87.78-1.66 1.01-2.4m6.48 3.81c.18-.18.27-.41.28-.66.03-.2-.02-.39-.12-.55-.29-.47-1.04-.69-2.28-.69l-1.29.07-.87-.58c-.63-.52-1.2-1.43-1.6-2.56l.04-.14c.33-1.33.64-2.94-.02-3.6a.853.853 0 0 0-.61-.24h-.24c-.37 0-.7.39-.79.77-.37 1.33-.15 2.06.22 3.27v.01c-.25.88-.57 1.9-1.08 2.93l-.96 1.8-.89.49c-1.2.75-1.77 1.59-1.88 2.12-.04.19-.02.36.05.54l.03.05.48.31.44.11c.81 0 1.73-.95 2.97-3.07l.18-.07c1.03-.33 2.31-.56 4.03-.75 1.03.51 2.24.74 3 .74.44 0 .74-.11.91-.3m-.41-.71l.09.11c-.01.1-.04.11-.09.13h-.04l-.19.02c-.46 0-1.17-.19-1.9-.51.09-.1.13-.1.23-.1 1.4 0 1.8.25 1.9.35M8.83 17c-.65 1.19-1.24 1.85-1.69 2 .05-.38.5-1.04 1.21-1.69l.48-.31m3.02-6.91c-.23-.9-.24-1.63-.07-2.05l.07-.12.15.05c.17.24.19.56.09 1.1l-.03.16-.16.82-.05.04z"/></svg></a></li><li class="menuitemfolded"><a href="javascript:void(0);" title="Fold/unfold all" rel="nofollow" class="fold_unfold_all_new" onclick="fold_unfold_all();"><span>Fold/unfold all</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M 2,0 L 6.5,3 L 2,6 z M 8,6.6 L 12.5,9.6 L 8,12.6 z M 14,13.2 L 20,13.2 L 17,17.7 z"/></svg></a></li><li class="menuitem"><a href="start.html" title="Rename Page" rel="nofollow" class=" plugin_move_page "><span>Rename Page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18,4V3A1,1 0 0,0 17,2H5A1,1 0 0,0 4,3V7A1,1 0 0,0 5,8H17A1,1 0 0,0 18,7V6H19V10H9V21A1,1 0 0,0 10,22H12A1,1 0 0,0 13,21V12H21V4H18Z" /></svg></a></li><li class="siteexport_addpage"><a href="start.html" title="Export Page to HTML/PDF" rel="nofollow"><span>Export Page to HTML/PDF</span><svg width="61px" height="51px" viewBox="0 0 61 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><path d="M26.1891503,39.0065635 L26.0876578,38.9773206 L60.6523866,1.23972885 L60.4321374,2.11844376 L60.476442,2.07071678 L60.4265202,2.14085429 L49.5024876,45.7237994 L32.8255882,40.9187101 L26,50.508302 L26,39.2103249 L26.1891503,39.0065635 Z M60.9727675,0.862917243 L22.2676619,38.2155059 L-0.00245042233,30.2214566 L60.9727675,0.862917243 Z" id="Paper-Plane"></path></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<!--
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="../../check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="../../css-validator/check/referer.fe4c581d16fb9f59f07485ddb441e467" title="Valid CSS" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15"
            alt="Driven by DokuWiki" /></a>
    </div>
</div></div>
-->
    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/taskrunner.fcab3902b42a9c670de53aa9d1961917.gif" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
